<div class="row">
  <div class="col-lg-3">
    <%= render "users/new_show", user: @user, newbook: @newbook, passer: "/users/#{@user.id}" %>
  </div>
  <div class="col-lg-9">
    <h1>Books</h1>
    <table class="table">
      <thead>
        <tr>
          <th class="col-xs-2">Title</th>
          <th class="col-xs-6">Opinion</th>
          <th class="col-xs-1"></th>
          <th class="col-xs-1"></th>
          <% if @user == current_user %>
            <th class="col-xs-1"></th>
            <th class="col-xs-1"></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <% @books.each do |book| %>
          <tr>
            <td class="col-xs-2">
              <%= link_to book.title, book_path(book) %>
            </td>
            <td class="col-xs-6">
              <%= book.body %>
            </td>
            <td class="col-xs-1">
              <% if book.liked_by?(current_user) %>
                <%= link_to book_likes_path(book_id: book.id, pass: "/users/#{@user.id}"), method: :delete do %>
                  <i class="fas fa-heart" aria-hidden="true" style="color: red;"></i>
                  <%= book.likes.count %>
                <% end %>
              <% else %>
                <%= link_to book_likes_path(book_id: book.id, pass: "/users/#{@user.id}"), method: :post do %>
                  <i class="far fa-heart" aria-hidden="true"></i>
                  <%= book.likes.count %>
                <% end %>
              <% end %>
            </td>
            <td class="col-xs-1">
                <i class="far fa-comment" aria-hidden="true"></i>
                <%= book.book_comments.count %>
            </td>
            <% if @user == current_user %>
              <td class="col-xs-1">
                <%= link_to "edit", edit_book_path(book), type: "button", class: "btn btn-success" %>
              </td>
              <td class="col-xs-1">
                <%= link_to "destroy", book_path(book), method: :delete ,"data-confirm" => "really delete?", type: "button", class:"btn btn-danger" %>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
